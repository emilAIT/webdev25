<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MeowChat - –í—Ö–æ–¥</title>
    <link rel="stylesheet" href="/static/css/styles.css" />
    <link rel="stylesheet" href="/static/css/auth.css" />
    <link rel="stylesheet" href="/static/css/notifications.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
  </head>
  <body>
    <main class="login-container">
      <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞ (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –≤–∏–¥–∏–º—ã–π) -->
      <div id="login-view">
        <div class="login-form">
          <h1 class="login-title">Welcome Back</h1>
          <div
            id="login-error"
            class="error-message"
            style="display: none"
          ></div>
          {% if error %}
          <div class="error-message">{{ error }}</div>
          {% endif %}
          <form id="login-form" action="/login" method="post">
            <div class="form-group">
              <label for="login-email">Email</label>
              <input
                type="email"
                id="login-email"
                name="login_id"
                class="form-control"
                placeholder="Enter Email Here"
                required
              />
            </div>
            <div class="form-group">
              <label for="login-password">Password</label>
              <div class="password-container">
                <input
                  type="password"
                  id="login-password"
                  name="password"
                  class="form-control"
                  placeholder="Enter Password Here"
                  required
                />
                <button
                  type="button"
                  class="password-toggle"
                  onclick="togglePassword('login-password')"
                >
                  üëÅÔ∏è
                </button>
              </div>
            </div>
            <div class="checkbox-container">
              <script
                src="https://www.google.com/recaptcha/api.js"
                async
                defer
              ></script>
              <div
                class="g-recaptcha"
                data-sitekey="6LfBUiYrAAAAAIH2wJSd4-zpvxMEbREyU0XtMVeO
              "
              ></div>
            </div>
            <a href="#" class="forgot-password">Forgot Password?</a>
            <button type="submit" class="login-btn">Login</button>
            <div class="register-link">
              Don't have an account? <a href="/register">Sign up</a>
            </div>
          </form>
        </div>
      </div>

      <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ñ–æ—Ä–º—ã —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç—ã–π) -->
      <div id="forgot-password-view" style="display: none">
        <div class="login-form">
          <!-- –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ—Ç –∂–µ –∫–ª–∞—Å—Å –¥–ª—è —Å—Ç–∏–ª–µ–π -->
          <h1 class="login-title">Reset Password</h1>
          <p style="text-align: center; margin-bottom: 20px; color: #555">
            Enter your email address and we'll send you a link to reset your
            password.
          </p>
          <form id="forgot-password-form">
            <div class="form-group">
              <label for="forgot-email">Email</label>
              <input
                type="email"
                id="forgot-email"
                name="email"
                class="form-control"
                placeholder="Enter your email"
                required
              />
            </div>
            <div
              id="forgot-error"
              class="error-message"
              style="display: none"
            ></div>
            <div
              id="forgot-success"
              class="success-message"
              style="display: none"
            ></div>
            <button type="submit" class="login-btn">Send Reset Link</button>
            <div class="login-link" style="margin-top: 15px">
              <a href="#" id="back-to-login-link">Back to Login</a>
            </div>
          </form>
        </div>
      </div>
    </main>

    <script>
      function togglePassword(inputId) {
        const passwordInput = document.getElementById(inputId);
        const passwordToggle = passwordInput.nextElementSibling;

        if (passwordInput.type === "password") {
          passwordInput.type = "text";
          passwordToggle.textContent = "üëÅÔ∏è‚Äçüó®Ô∏è";
        } else {
          passwordInput.type = "password";
          passwordToggle.textContent = "üëÅÔ∏è";
        }
      }

      // –î–æ–±–∞–≤–ª—è–µ–º fallback –¥–ª—è —Å–ª—É—á–∞—è, –µ—Å–ª–∏ JavaScript –æ—Ç–∫–ª—é—á–µ–Ω
      window.onload = function () {
        const form = document.getElementById("login-form");
        if (form && typeof fetch === "function") {
          // –ï—Å–ª–∏ JavaScript –¥–æ—Å—Ç—É–ø–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç fetch,
          // –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É —á–µ—Ä–µ–∑ JavaScript
          form.setAttribute("novalidate", "");
        }
      };
    </script>

    <!-- JavaScript —Ñ–∞–π–ª—ã -->
    <script src="/static/js/notifications.js"></script>
    <script src="/static/js/api.js"></script>
    <script src="/static/js/login.js"></script>
  </body>
</html>
